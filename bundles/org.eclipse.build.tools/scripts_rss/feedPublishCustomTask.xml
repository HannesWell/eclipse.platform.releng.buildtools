<?xml version="1.0"?>

<project name="Publish Feed" default="doAll">

	<taskdef name="PublishFeed" 
	  classname="org.eclipse.releng.services.rss.RSSFeedPublisherTask" 
	  classpath="../feedTools.jar"/>

	<target name="doAll">
		<antcall target="publishFeedToCVS"/>
		<antcall target="publishFeedWithSCP"/>
	</target>
	
	<!-- 1. Define property file -->
	<target name="init">
		<property file="../properties/updater.emf.properties"/>
		<!-- <property file="../properties/updater.uml2.properties"/> -->
		<!-- <property file="../properties/updater.eclipse.properties"/> -->
	</target>

	<!-- 2. Publish feed: commit file into CVS - overwrite existing and add if necessary -->
	<target name="publishFeedToCVS" depends="init" description="Publish feed: commit file into CVS - overwrite existing and add if necessary">
		<PublishFeed 
			debug="${debug}" 
			file="${file}" 
			
			cvsExec="${cvsExec}"
			cvsRoot="${cvsRoot}"
			cvsPath="${cvsPath}"
			cvsTemp="${cvsTemp}"
		/>
		<delete dir="${cvsTemp}"/>
	</target>

	<!-- 3. Publish feed: SCP file to remote server, overwriting existing if exists -->
	<target name="publishFeedWithSCP" depends="init" description="Publish feed: SCP file to remote server, overwriting existing if exists">
		<PublishFeed 
			debug="${debug}" 
			file="${file}" 
			
			scpExec="${scpExec}"
			scpTarget="${scpTarget}"
			sshExec="${sshExec}"
		/>
	</target>

</project>
